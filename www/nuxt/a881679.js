(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{613:function(t,e,n){"use strict";(function(t){n(67),n(27),n(12),n(21),n(44);var r=n(13),o=n(108),d=n(597),h=n(92),c={name:"SkStoreNavi",props:{store:{type:Object,required:!0},has:{type:Object,required:!0},value:{type:Number,required:!1,default:r.ST_MODES.none}},components:{VBtn:o.a,VBadge:d.a,SkSvg:h.default},data:function(){return{mode:r.ST_MODES.none}},mounted:function(){this.mode=this.value},methods:{setMode:function(t){var e=this.mode,main=/^stores-id$/.test(this.$route.name);switch(console.log("NAV (mode):",e+" -> "+t,main),t===e&&(t=r.ST_MODES.def),t){case r.ST_MODES.qr:case r.ST_MODES.def:main?(this.mode=t,this.$emit("state",t)):this.$router.replace({path:"/stores/"+this.store.id});break;case r.ST_MODES.fils:this.$router.push({path:"/stores/"+this.store.id+"/filials"});break;case r.ST_MODES.find:this.$router.push({path:"/stores/"+this.store.id+"/catalog/"});break;case r.ST_MODES.info:this.$router.push({path:"/stores/"+this.store.id+"/info"});break;case r.ST_MODES.share:this.$router.push({path:"/stores/"+this.store.id+"/share"})}}},render:function(e){var n=this,o=this.store.brandcolor;return e("div",{class:{"sk-store-nav":!0,"sk-has-qr":this.mode===r.ST_MODES.qr,"sk-has-info":this.mode===r.ST_MODES.info,"sk-has-fils":this.mode===r.ST_MODES.fils,"sk-has-find":this.mode===r.ST_MODES.find,"sk-has-share":this.mode===r.ST_MODES.share,"sk-has-chat":this.mode===r.ST_MODES.chat,"sk-has-card":this.has.card,"sk-no-card":!this.has.card}},[e("v-badge",{props:{overlap:!0,color:t.isEmpty(this.store.pointscount)?"transparent":o||"default",content:this.store.pointscount}},[e("v-btn",{props:{outlined:!0},on:{click:function(){n.setMode(r.ST_MODES.fils)}}},[e("sk-svg",{props:{xref:"#ico-store"}})])]),e("v-btn",{props:{outlined:!0},on:{click:function(){n.setMode(r.ST_MODES.find)}}},[e("sk-svg",{props:{xref:"#ico-search"}})]),e("v-btn",{props:{outlined:!0},on:{click:function(){n.setMode(r.ST_MODES.qr)}}},[e("sk-svg",{props:{xref:"#ico-qrcode"}}),this.has.card?e("div",{class:"sk-has-card"}):null]),e("v-btn",{props:{outlined:!0},on:{click:function(){n.setMode(r.ST_MODES.share)}}},[e("sk-svg",{props:{xref:"#ico-share"}})]),e("v-btn",{props:{outlined:!0},on:{click:function(){n.setMode(r.ST_MODES.info)}}},[e("sk-svg",{props:{xref:"#ico-info"}})])])}};e.a=c}).call(this,n(13))},616:function(t,e,n){var content=n(618);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(9).default)("fe05fbb0",content,!0,{sourceMap:!1})},617:function(t,e,n){"use strict";n(616)},618:function(t,e,n){(e=n(8)(!1)).push([t.i,".text-muted[data-v-700cd839]{color:#6c757d;font-size:.75rem;line-height:1.115}.sk-whited[data-v-700cd839]{background:#fff}.sk-store-nav[data-v-700cd839]{display:flex;justify-content:space-around!important;align-items:center!important;flex-wrap:nowrap;width:100%;background:transparent}.sk-store-nav .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]{padding:0;width:38px;min-width:38px;height:38px;border-color:#5c5c5c;background-color:#fff;box-shadow:0 0 4px rgba(0,0,0,.5)!important;transition:all .33s ease}.sk-store-nav .v-btn:not(.v-btn--round).v-size--default svg[data-v-700cd839]{transition:all .33s ease;width:22px;height:22px;color:#757575}.sk-store-nav .v-btn:not(.v-btn--round).v-size--default .sk-has-card[data-v-700cd839]{position:absolute;width:8px;height:8px;background-color:#11b719;border-radius:50%;border:1px solid #fff;top:-10px;right:-2px}.sk-store-nav.sk-has-qr .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(2),.sk-store-nav.sk-has-qr .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(4){width:46px;min-width:46px;height:46px}.sk-store-nav.sk-has-qr .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(3){width:56px;min-width:56px;height:56px}.sk-store-nav.sk-has-qr .v-btn:not(.v-btn--round).v-size--default:nth-child(3) svg[data-v-700cd839]{width:32px;height:32px}.sk-store-nav.sk-has-info .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(4){width:46px;min-width:46px;height:46px}.sk-store-nav.sk-has-info .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(5){width:56px;min-width:56px;height:56px}.sk-store-nav.sk-has-info .v-btn:not(.v-btn--round).v-size--default:nth-child(5) svg[data-v-700cd839]{width:32px;height:32px}.sk-store-nav.sk-has-fils .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]{width:38px;min-width:38px;height:38px}.sk-store-nav.sk-has-fils .v-btn:not(.v-btn--round).v-size--default svg[data-v-700cd839]{width:22px;height:22px}.sk-store-nav.sk-has-fils .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:first-child{width:56px;min-width:56px;height:56px}.sk-store-nav.sk-has-fils .v-btn:not(.v-btn--round).v-size--default:first-child svg[data-v-700cd839]{width:32px;height:32px}.sk-store-nav.sk-has-fils .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(2),.sk-store-nav.sk-has-find .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:first-child,.sk-store-nav.sk-has-find .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(3),.sk-store-nav.sk-has-find .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(4),.sk-store-nav.sk-has-find .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(5){width:46px;min-width:46px;height:46px}.sk-store-nav.sk-has-find .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(2){width:56px;min-width:56px;height:56px}.sk-store-nav.sk-has-find .v-btn:not(.v-btn--round).v-size--default:nth-child(2) svg[data-v-700cd839]{width:32px;height:32px}.sk-store-nav.sk-has-share .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:first-child,.sk-store-nav.sk-has-share .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(2),.sk-store-nav.sk-has-share .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(3),.sk-store-nav.sk-has-share .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(5){width:46px;min-width:46px;height:46px}.sk-store-nav.sk-has-share .v-btn:not(.v-btn--round).v-size--default[data-v-700cd839]:nth-child(4){width:56px;min-width:56px;height:56px}.sk-store-nav.sk-has-share .v-btn:not(.v-btn--round).v-size--default:nth-child(4) svg[data-v-700cd839]{width:32px;height:32px}",""]),t.exports=e},619:function(t,e,n){"use strict";(function(t){n(67),n(27),n(21),n(44),n(24);var r=n(108),o=n(171),d=n(631),h=n(107),c=n(205),l=n(96),v=n(56),f=n(204),m=n(601),k=n(584),x=n(602),S=n(92);n(630);var y="МоиКарты",w="Google: https://play.google.com/store/apps/details?id=skidos.my.ru \n\n\n\n Apple: https://apps.apple.com/ru/app/%D0%BC%D0%BE%D0%B8%D0%BA%D0%B0%D1%80%D1%82%D1%8B-%D1%80%D1%84/id1510411658 \n\n\n\n",O=0,_=1,D=3;e.a={name:"SkStoreShare",props:{parent:{type:Object,required:!0}},components:{VBtn:r.a,VList:o.a,VSubheader:d.a,VListItem:h.a,VListItemGroup:c.a,VListItemIcon:l.a,VListItemContent:v.a,VListItemTitle:v.c,VListItemSubtitle:v.b,VListItemAction:f.a,VForm:m.a,VTextField:k.a,VSkeletonLoader:x.a,SkSvg:S.default},data:function(){return{tel:"",telValid:!0,telSend:O}},created:function(){if($("ya-share-script").length<1){var s=$(document.createElement("script"));s.attr("src","https://yastatic.net/share2/share.js"),s.attr("id","ya-share-script"),s.appendTo("body")}},mounted:function(){var e=this;this.$store.getters["active/hasActiveStore"]||this.$router.replace({path:"/stores/"});var n=this.$refs.phone;n&&this.$nextTick((function(){var r=e,o=$(n.$el).find("input");t.isEmpty(o.attr("data-mask"))&&(o.mask("+7(999) 999-9999",{completed:function(){r.tel=this.val(),console.log("tel:",r.tel)}}),o.attr("data-mask","1"))}))},computed:{msg_text:function(){return this.$store.getters["active/hasActiveStore"]?this.$store.state.profile.user.name+' предлагает Вам установить приложение "МоиКарты" и стать клиентом '+this.$store.state.active.store.title+"\n"+w:""}},methods:{sendSms:function(){if(t.isEmpty(this.tel))this.telValid=!1;else{var e={phoneNumber:this.tel,textMessage:y+"\n"+this.msg_text};$(this.$refs.phone.$el).find("input");this.telSend=_;var n=/iPhone|iPod|iPad/gi.test(navigator.platform),r="sms:"+e.phoneNumber;r+=n?"&":"?",r+="body="+encodeURIComponent(e.textMessage),window.location.href=r;try{this.$http.post({type:"api-call",url:"/skidosapi/share",contentType:"application/json;charset=utf-8",dataType:"text",data:JSON.stringify({q:"app",phone:e.phoneNumber,user:this.$store.state.profile.user.id}),processData:!1})}catch(t){console.log("ERR on call /share app:",t)}this.telSend=O}}},render:function(t){var e=this,n=this,r=[];return this.loading?r.push(t("v-list-item",[t("v-skeleton-loader",{props:{type:"list-item-three-line"}})])):(r.push(t("v-list-item",{key:"item-share-sms",class:{"mb-5":!0}},[t("v-list-item-content",[t("v-form",{on:{submit:function(t){return t.preventDefault(),e.sendSms(),!1}}},[t("v-text-field",{props:{type:"tel",label:"тлф. №",outlined:!0,"hide-details":!1,autofocus:!0,error:this.telSend===D,"error-messages":this.telSend===D?"СМС не отправилась, попробуйте другим способом":null,hint:this.telSend===D?"СМС не отправилась, попробуйте другим способом":"введите № телефона, чтобы поделиться приложением по CMC",color:this.telSend===D?"orange lighten-1":"green lighten-1",value:this.tel,mask:"+7(999) 999-9999"},ref:"phone",on:{focus:function(){setTimeout((function(){$([document.documentElement,document.body]).animate({scrollTop:$(n.$refs.phone.$el).find("input").offset().top},600)}),600)}}}),t("v-btn",{props:{color:"green lighten-1",dark:!0,loading:this.telSend===_,type:"submit",width:"100%"}},[t("sk-svg",{props:{xref:"#ico-sms"},class:{"mr-2":!0}}),"отправить SMS"])])])])),r.push(t("v-list-item",{key:"item-share-ya"},[t("v-list-item-content",[t("div",{class:{"ya-share2":!0},attrs:{"data-services":"telegram,whatsapp,viber","data-title":y,"data-url":this.msg_text}})])]))),t("v-list",{class:{"mt-5":!0}},r)}}}).call(this,n(13))},620:function(t,e,n){var content=n(621);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(9).default)("e8b41e5e",content,!0,{sourceMap:!1})},621:function(t,e,n){(e=n(8)(!1)).push([t.i,".theme--light.v-subheader{color:rgba(0,0,0,.6)}.theme--dark.v-subheader{color:hsla(0,0%,100%,.7)}.v-subheader{align-items:center;display:flex;height:48px;font-size:.875rem;font-weight:400;padding:0 16px}.v-subheader--inset{margin-left:56px}",""]),t.exports=e},622:function(t,e,n){"use strict";var r=n(613).a,o=(n(617),n(29)),component=Object(o.a)(r,void 0,void 0,!1,null,"700cd839",null);e.a=component.exports},623:function(t,e,n){var content=n(633);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(9).default)("0a0d4a1d",content,!0,{sourceMap:!1})},630:function(t,e,n){var r,o,a,d,i,h;n(70),n(31),n(426),n(21),n(47),n(52),n(24),r=jQuery,a=function(){var t=document.createElement("input"),e="onpaste";return t.setAttribute(e,""),"function"==typeof t[e]?"paste":"input"}()+".mask",d=navigator.userAgent,i=/iphone/i.test(d),h=/android/i.test(d),r.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},r.fn.extend({caret:function(t,e){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(e="number"==typeof e?e:t,this.each((function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select())}))):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),t=0-n.duplicate().moveStart("character",-1e5),e=t+n.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(t,e){var n,s,u,d,c;return!t&&this.length>0?r(this[0]).data(r.mask.dataName)():(e=r.extend({placeholder:r.mask.placeholder,completed:null},e),n=r.mask.definitions,s=[],u=c=t.length,d=null,r.each(t.split(""),(function(t,e){"?"==e?(c--,u=t):n[e]?(s.push(RegExp(n[e])),null===d&&(d=s.length-1)):s.push(null)})),this.trigger("unmask").each((function(){function l(t){for(;c>++t&&!s[t];);return t}function v(t,n){var r,a;if(!(0>t)){for(r=t,a=l(n);c>r;r++)if(s[r]){if(!(c>a&&s[r].test(x[a])))break;x[r]=x[a],x[a]=e.placeholder,a=l(a)}b(),k.caret(Math.max(d,t))}}function f(t,n){var r;for(r=t;n>r&&c>r;r++)s[r]&&(x[r]=e.placeholder)}function b(){k.val(x.join(""))}function m(t){var n,r,a=k.val(),i=-1;for(n=0,pos=0;c>n;n++)if(s[n]){for(x[n]=e.placeholder;pos++<a.length;)if(r=a.charAt(pos-1),s[n].test(r)){x[n]=r,i=n;break}if(pos>a.length)break}else x[n]===a.charAt(pos)&&n!==u&&(pos++,i=n);return t?b():u>i+1?(k.val(""),f(0,c)):(b(),k.val(k.val().substring(0,i+1))),u?n:d}var k=r(this),x=r.map(t.split(""),(function(t){return"?"!=t?n[t]?e.placeholder:t:void 0})),S=k.val();k.data(r.mask.dataName,(function(){return r.map(x,(function(t,n){return s[n]&&t!=e.placeholder?t:null})).join("")})),k.attr("readonly")||k.one("unmask",(function(){k.unbind(".mask").removeData(r.mask.dataName)})).bind("focus.mask",(function(){var e;clearTimeout(o),S=k.val(),e=m(),o=setTimeout((function(){b(),e==t.length?k.caret(0,e):k.caret(e)}),10)})).bind("blur.mask",(function(){m(),k.val()!=S&&k.change()})).bind("keydown.mask",(function(t){var e,n,a,r=t.which;8===r||46===r||i&&127===r?(n=(e=k.caret()).begin,0==(a=e.end)-n&&(n=46!==r?function(t){for(;--t>=0&&!s[t];);return t}(n):a=l(n-1),a=46===r?l(a):a),f(n,a),v(n,a-1),t.preventDefault()):27==r&&(k.val(S),k.caret(0,m()),t.preventDefault())})).bind("keypress.mask",(function(t){var n,a,i,o=t.which,u=k.caret();t.ctrlKey||t.altKey||t.metaKey||32>o||o&&(0!=u.end-u.begin&&(f(u.begin,u.end),v(u.begin,u.end-1)),n=l(u.begin-1),c>n&&(a=String.fromCharCode(o),s[n].test(a)&&(function(t){var n,r,a,i;for(n=t,r=e.placeholder;c>n;n++)if(s[n]){if(a=l(n),i=x[n],x[n]=r,!(c>a&&s[a].test(i)))break;r=i}}(n),x[n]=a,b(),i=l(n),h?setTimeout(r.proxy(r.fn.caret,k,i),0):k.caret(i),e.completed&&i>=c&&e.completed.call(k))),t.preventDefault())})).bind(a,(function(){setTimeout((function(){var t=m(!0);k.caret(t),e.completed&&t==k.val().length&&e.completed.call(k)}),0)})),m()})))}})},631:function(t,e,n){"use strict";var r=n(2),o=(n(620),n(11)),d=n(4);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a=Object(d.a)(o.a).extend({name:"v-subheader",props:{inset:Boolean},render:function(t){return t("div",{staticClass:"v-subheader",class:c({"v-subheader--inset":this.inset},this.themeClasses),attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})},632:function(t,e,n){"use strict";n(623)},633:function(t,e,n){(e=n(8)(!1)).push([t.i,".ya-share2__container{margin-top:2rem}.ya-share2__container ul{display:flex;padding:0;width:100%;justify-content:space-around;flex-wrap:wrap}.ya-share2__container ul .ya-share2__item{margin:0 .5rem 2rem 0!important;text-align:center;width:auto}.ya-share2__container ul .ya-share2__item .ya-share2__link{box-shadow:0 2px 6px rgba(0,0,0,.22);border:1px solid #fff}.ya-share2__container ul .ya-share2__icon{height:56px!important;width:56px!important;background-size:56px 56px!important}",""]),t.exports=e},648:function(t,e,n){"use strict";var r=n(619).a,o=(n(632),n(29)),component=Object(o.a)(r,void 0,void 0,!1,null,null,null);e.a=component.exports},796:function(t,e,n){"use strict";n.r(e);n(45);var r=n(5),o=n(13),d=n(108),h=n(167),c=n(80),l=n(622),v=n(648),f={asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.store,r=n.state.active.store){e.next=8;break}return o=t.params.id,e.next=6,n.dispatch("loadStore",{id:o});case 6:r=e.sent,n.commit("active/setStore",r);case 8:return e.abrupt("return",{store:r,has:{store:!!r}});case 9:case"end":return e.stop()}}),e)})))()},head:function(){return{title:this.has.store?this.store.title:"loading..."}},components:{VBtn:d.a,VCard:h.a,VCardText:c.b,SkStoreNavi:l.a,SkStoreShare:v.a},render:function(t){return t("v-card",{props:{flat:!0}},[t("v-card-text",[t(l.a,{key:"store-navi-info",props:{store:this.store,has:this.has,value:o.ST_MODES.share}}),t(v.a,{props:{parent:this.store,has:this.has}})])])}},m=n(29),component=Object(m.a)(f,void 0,void 0,!1,null,null,null);e.default=component.exports}}]);