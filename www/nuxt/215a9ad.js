(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{612:function(t,e,r){"use strict";var n=r(614),o=r(615);t.exports=n("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},614:function(t,e,r){"use strict";var n=r(10),o=r(19),c=r(133),l=r(46),d=r(422),f=r(421),v=r(177),m=r(32),h=r(18),y=r(219),x=r(100),w=r(220);t.exports=function(t,e,r){var O=-1!==t.indexOf("Map"),j=-1!==t.indexOf("Weak"),k=O?"set":"add",S=o[t],_=S&&S.prototype,E=S,C={},P=function(t){var e=_[t];l(_,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(j&&!m(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return j&&!m(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(j&&!m(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(c(t,"function"!=typeof S||!(j||_.forEach&&!h((function(){(new S).entries().next()})))))E=r.getConstructor(e,t,O,k),d.REQUIRED=!0;else if(c(t,!0)){var D=new E,$=D[k](j?{}:-0,1)!=D,R=h((function(){D.has(1)})),X=y((function(t){new S(t)})),M=!j&&h((function(){for(var t=new S,e=5;e--;)t[k](e,e);return!t.has(-0)}));X||((E=e((function(e,r){v(e,E,t);var n=w(new S,e,E);return null!=r&&f(r,n[k],{that:n,AS_ENTRIES:O}),n}))).prototype=_,_.constructor=E),(R||M)&&(P("delete"),P("has"),O&&P("get")),(M||$)&&P(k),j&&_.clear&&delete _.clear}return C[t]=E,n({global:!0,forced:E!=S},C),x(E,t),j||r.setStrong(E,t,O),E}},615:function(t,e,r){"use strict";var n=r(38).f,o=r(110),c=r(217),l=r(99),d=r(177),f=r(421),v=r(221),m=r(218),h=r(37),y=r(422).fastKey,x=r(77),w=x.set,O=x.getterFor;t.exports={getConstructor:function(t,e,r,v){var m=t((function(t,n){d(t,m,e),w(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=n&&f(n,t[v],{that:t,AS_ENTRIES:r})})),x=O(e),j=function(t,e,r){var n,o,c=x(t),l=k(t,e);return l?l.value=r:(c.last=l={index:o=y(e,!0),key:e,value:r,previous:n=c.last,next:void 0,removed:!1},c.first||(c.first=l),n&&(n.next=l),h?c.size++:t.size++,"F"!==o&&(c.index[o]=l)),t},k=function(t,e){var r,n=x(t),o=y(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return c(m.prototype,{clear:function(){for(var t=x(this),data=t.index,e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),delete data[e.index],e=e.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=x(this),r=k(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),h?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=x(this),n=l(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!k(this,t)}}),c(m.prototype,r?{get:function(t){var e=k(this,t);return e&&e.value},set:function(t,e){return j(this,0===t?0:t,e)}}:{add:function(t){return j(this,t=0===t?0:t,t)}}),h&&n(m.prototype,"size",{get:function(){return x(this).size}}),m},setStrong:function(t,e,r){var n=e+" Iterator",o=O(e),c=O(n);v(t,e,(function(t,e){w(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=c(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),m(e)}}},624:function(t,e,r){"use strict";r(53),r(30),r(178),r(79),r(612),r(12),r(54),r(17),r(21),r(76),r(44),r(68),r(66),r(98);var n=r(2),o=(r(423),r(3)),c=r(69),l=r(0);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v=["sm","md","lg","xl"],m=v.reduce((function(t,e){return t[e]={type:[Boolean,String,Number],default:!1},t}),{}),h=v.reduce((function(t,e){return t["offset"+Object(l.w)(e)]={type:[String,Number],default:null},t}),{}),y=v.reduce((function(t,e){return t["order"+Object(l.w)(e)]={type:[String,Number],default:null},t}),{}),x={col:Object.keys(m),offset:Object.keys(h),order:Object.keys(y)};function w(t,e,r){var n=t;if(null!=r&&!1!==r){if(e){var o=e.replace(t,"");n+="-".concat(o)}return"col"!==t||""!==r&&!0!==r?(n+="-".concat(r)).toLowerCase():n.toLowerCase()}}var O=new Map;e.a=o.a.extend({name:"v-col",functional:!0,props:f(f(f(f({cols:{type:[Boolean,String,Number],default:!1}},m),{},{offset:{type:[String,Number],default:null}},h),{},{order:{type:[String,Number],default:null}},y),{},{alignSelf:{type:String,default:null,validator:function(t){return["auto","start","end","center","baseline","stretch"].includes(t)}},tag:{type:String,default:"div"}}),render:function(t,e){var r=e.props,data=e.data,o=e.children,l=(e.parent,"");for(var d in r)l+=String(r[d]);var f=O.get(l);return f||function(){var t,e;for(e in f=[],x)x[e].forEach((function(t){var n=r[t],o=w(e,t,n);o&&f.push(o)}));var o=f.some((function(t){return t.startsWith("col-")}));f.push((t={col:!o||!r.cols},Object(n.a)(t,"col-".concat(r.cols),r.cols),Object(n.a)(t,"offset-".concat(r.offset),r.offset),Object(n.a)(t,"order-".concat(r.order),r.order),Object(n.a)(t,"align-self-".concat(r.alignSelf),r.alignSelf),t)),O.set(l,f)}(),t(r.tag,Object(c.a)(data,{class:f}),o)}})},625:function(t,e,r){"use strict";r(22),r(53),r(30),r(178),r(612),r(54),r(17),r(21),r(55),r(76),r(44),r(66),r(98);var n=r(2),o=(r(423),r(3)),c=r(69),l=r(0);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v=["sm","md","lg","xl"],m=["start","end","center"];function h(t,e){return v.reduce((function(r,n){return r[t+Object(l.w)(n)]=e(),r}),{})}var y=function(t){return[].concat(m,["baseline","stretch"]).includes(t)},x=h("align",(function(){return{type:String,default:null,validator:y}})),w=function(t){return[].concat(m,["space-between","space-around"]).includes(t)},O=h("justify",(function(){return{type:String,default:null,validator:w}})),j=function(t){return[].concat(m,["space-between","space-around","stretch"]).includes(t)},k=h("alignContent",(function(){return{type:String,default:null,validator:j}})),S={align:Object.keys(x),justify:Object.keys(O),alignContent:Object.keys(k)},_={align:"align",justify:"justify",alignContent:"align-content"};function E(t,e,r){var n=_[t];if(null!=r){if(e){var o=e.replace(t,"");n+="-".concat(o)}return(n+="-".concat(r)).toLowerCase()}}var C=new Map;e.a=o.a.extend({name:"v-row",functional:!0,props:f(f(f({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:y}},x),{},{justify:{type:String,default:null,validator:w}},O),{},{alignContent:{type:String,default:null,validator:j}},k),render:function(t,e){var r=e.props,data=e.data,o=e.children,l="";for(var d in r)l+=String(r[d]);var f=C.get(l);return f||function(){var t,e;for(e in f=[],S)S[e].forEach((function(t){var n=r[t],o=E(e,t,n);o&&f.push(o)}));f.push((t={"no-gutters":r.noGutters,"row--dense":r.dense},Object(n.a)(t,"align-".concat(r.align),r.align),Object(n.a)(t,"justify-".concat(r.justify),r.justify),Object(n.a)(t,"align-content-".concat(r.alignContent),r.alignContent),t)),C.set(l,f)}(),t(r.tag,Object(c.a)(data,{staticClass:"row",class:f}),o)}})},628:function(t,e,r){"use strict";(function(t){r(27),r(21),r(44),r(45);var n=r(5),o=r(13),c=r(92);e.a={name:"SkUserProfile",components:{SkSvg:c.default},data:function(){return{valid:!1,title:"",pwd:"stub_XXX",pwd2:"stub_XXX",tel:"",telRules:[function(t){return/^(\+)?\d{10,11}$/.test(t)||"укажите Ваш телефон для связи"}],eml:"",emailRules:[function(t){return/^.{1,}@{1}.{1,}\.+.{1,}/.test(t)||"укажите корректный e-mail адрес"}],addr:"",error:"",agree:!1,alert:"warning",mode:o.MODES.default}},computed:{userId:function(){return this.$store.state.profile.user.id},loading:function(){return this.mode===o.MODES.loading||this.mode===o.MODES.saving}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,c,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={type:"core-read",query:"sin2:/v:b841fde1-394a-4ab1-8ca7-48446f58c27e?id="+e.userId},e.mode=o.MODES.loading,r.prev=2,r.next=5,e.$http.post(n);case 5:if(!(c=r.sent).error){r.next=10;break}throw c.error;case 10:if(!(c.result.data&&c.result.data.length>0)){r.next=23;break}u=t.sin2obj(c.result.columnIndexes,c.result.data[0]),e.title=t.isEmpty(u.title)?u.name:u.title,e.pwd="stub_XXX",e.pwd2="stub_XXX",e.tel=u.phone,e.eml=u.email,e.addr=u.addrstring,e.error="",e.agree=!1,t.isEmpty(e.eml)&&/^.{1,}@{1}.{1,}\.+.{1,}/.test(u.name)&&(e.eml=u.name),r.next=24;break;case 23:throw{message:"Данные профиля недоступны"};case 24:r.next=30;break;case 26:r.prev=26,r.t0=r.catch(2),console.log("ERR on profile read:",r.t0),ski.msg({text:"Ошибка получения данных профиля, попробуйте получить позднее.",type:"warning"});case 30:e.mode=o.MODES.default;case 31:case"end":return r.stop()}}),r,null,[[2,26]])})))()},activated:function(){if(!this.$store.getters["profile/is"]("user"))return ski.msg({text:"Необходимо авторизоваться",color:"warning"}),void this.$router.replace({path:"/profile/auth"});this.error="",this.$nextTick((function(){$('input[name="u"]').trigger("focus")}))},methods:{on_profile:function(e){var r=this,c=this.userId;if(this.error="",this.alert="warning",e.preventDefault(),t.isEmpty(this.title)||t.isEmpty(this.pwd)||t.isEmpty(this.tel)||t.isEmpty(this.eml))return this.valid=!1,this.error="для регистрации необходимо заполнить все данные",$('input[name="u"]').trigger("focus"),!1;if(this.pwd!==this.pwd2)return this.valid=!1,this.error="пароли не совпадают",$('input[name="p1"]').trigger("focus"),!1;this.mode=o.MODES.saving;var l={id:c,name:this.eml,title:this.title,password:"stub_XXX"===this.pwd?null:this.pwd,email:this.eml,phone:this.tel,addrstring:this.addr},d={type:"api-call",url:"/skidosapi/reg-user",dataType:"json",method:"POST",contentType:"application/json;charset=utf-8",data:JSON.stringify({client:l})};Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.$http.post(d);case 3:if(!(e=t.sent).success){t.next=10;break}r.alert="success",r.error="данные профиля обновлены",r.mode=o.MODES.default,t.next=11;break;case 10:throw e.error?e.error:{message:"неопознанная ошибка"};case 11:r.$store.commit("profile/setUserInfo",l),t.next=20;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0),r.mode=o.MODES.error,r.alert="warning",r.error="Возникла ошибка при обновлении профиля - попробуйте повторить попытку позднее.<br /><small>Дополнительная информация: "+t.t0.message+"</small>";case 20:case"end":return t.stop()}}),t,null,[[0,14]])})))()},signout:function(t){var e=this;return t.preventDefault(),this.$store.dispatch("profile/logout").then((function(){e.$router.replace({path:"/profile/auth"})})),!1}}}}).call(this,r(13))},650:function(t,e,r){var content=r(680);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(9).default)("eb50c4c2",content,!0,{sourceMap:!1})},679:function(t,e,r){"use strict";r(650)},680:function(t,e,r){(e=r(8)(!1)).push([t.i,".v-card .v-card__actions[data-v-5db3f7f6]{flex-direction:column;align-items:center}.v-card .v-card__actions .ref-auth[data-v-5db3f7f6],.v-card .v-card__actions .ref-register[data-v-5db3f7f6]{font-size:.75rem;color:#777;text-decoration:none;margin:1.5rem auto}.v-card .v-card__actions .ref-auth[data-v-5db3f7f6]:hover,.v-card .v-card__actions .ref-register[data-v-5db3f7f6]:hover{color:#00f}.v-card a[data-v-5db3f7f6]{color:#777;text-decoration:none;display:block;margin:1rem 0}.v-card a .v-icon[data-v-5db3f7f6],.v-input svg[data-v-5db3f7f6]{color:#bdbdbd}.v-input svg[data-v-5db3f7f6]{width:16px;height:16px}",""]),t.exports=e},793:function(t,e,r){"use strict";r.r(e);var n=r(628).a,o=(r(679),r(29)),c=r(73),l=r.n(c),d=r(579),f=r(108),v=r(167),m=r(80),h=r(624),y=r(601),x=r(106),w=r(625),O=r(580),j=r(584),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{staticClass:"justify-center pt-sm-5"},[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-form",{attrs:{action:"#"},on:{submit:function(e){return t.on_profile(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-card",{staticClass:"pb-5"},[r("v-card-text",[r("v-text-field",{attrs:{label:"Ваше имя",name:"u",type:"text",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}},[r("sk-svg",{attrs:{slot:"prepend",xref:"#ico-morda"},slot:"prepend"})],1),t._v(" "),r("v-text-field",{attrs:{label:"Пароль",name:"p1",type:"password",required:""},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}},[r("sk-svg",{attrs:{slot:"prepend",xref:"#ico-asterisk"},slot:"prepend"})],1),t._v(" "),r("v-text-field",{attrs:{label:"Повторите пароль",name:"p2",type:"password",required:""},model:{value:t.pwd2,callback:function(e){t.pwd2=e},expression:"pwd2"}},[r("sk-svg",{attrs:{slot:"prepend",xref:"#ico-asterisk"},slot:"prepend"})],1),t._v(" "),r("v-text-field",{attrs:{label:"e-mail",name:"eml",type:"text",required:"",rules:t.emailRules},model:{value:t.eml,callback:function(e){t.eml=e},expression:"eml"}},[r("sk-svg",{attrs:{slot:"prepend",xref:"#ico-at"},slot:"prepend"})],1),t._v(" "),r("v-text-field",{attrs:{label:"Телефон",name:"tel",type:"tel",required:"",rules:t.telRules},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}},[r("sk-svg",{attrs:{slot:"prepend",xref:"#ico-mobile"},slot:"prepend"})],1),t._v(" "),r("v-text-field",{attrs:{label:"адрес",name:"addr",type:"text",messages:"адрес, используемый для доставки"},model:{value:t.addr,callback:function(e){t.addr=e},expression:"addr"}},[r("sk-svg",{attrs:{slot:"prepend",xref:"#ico-map-marker"},slot:"prepend"})],1),t._v(" "),r("a",{staticClass:"mt-3",attrs:{href:"//i.xn--80apggkpo6e.xn--p1ai/terms-of-use/",target:"_blank"}},[r("v-icon",[t._v("mdi-card-text-outline")]),t._v(" правила использования данного приложения\n                    ")],1),t._v(" "),r("v-alert",{directives:[{name:"show",rawName:"v-show",value:!/^$/.test(t.error),expression:"!/^$/.test(error)"}],staticClass:"my-3",attrs:{type:t.alert}},[r("div",{domProps:{innerHTML:t._s(t.error)}})])],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{type:"submit",rounded:"",dark:"",width:"14rem",color:"red darken-4",loading:t.loading}},[t._v("Изменить данные")]),t._v(" "),r("div",{staticClass:"d-flex mt-3 justify-center justify-space-between",staticStyle:{width:"14rem"}},[r("v-btn",{attrs:{small:"",text:""},on:{click:function(e){return t.$router.replace({path:"/"})}}},[t._v("На главную")]),t._v(" "),r("v-btn",{attrs:{small:"",text:""},on:{click:function(e){return e.stopPropagation(),t.signout(e)}}},[r("sk-svg",{attrs:{xref:"#ico-signout"}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"5db3f7f6",null);e.default=component.exports;l()(component,{SkSvg:r(92).default}),l()(component,{VAlert:d.a,VBtn:f.a,VCard:v.a,VCardActions:m.a,VCardText:m.b,VCol:h.a,VForm:y.a,VIcon:x.a,VRow:w.a,VSpacer:O.a,VTextField:j.a})}}]);